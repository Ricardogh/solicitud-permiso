<app-contenedor color="primary"
  [titulo]="'Solicitud de permiso'"
  [banderaEstado]="banderaEstado"
  [col]="'col-md-7'"
  [loadingPantalla] = "loadingPantalla"
  [icon]="'fa fa-save'"
>
<form [formGroup]="permisoForma" *ngIf="permisoForma">
  <div class="row">
    <div class="form-row col-sm-12">
      <mat-form-field appearance="legacy" class="form-group col-sm-7 p-3">
          <mat-label>Empleado</mat-label>
          <mtx-select [items]="dataEmpleado" [(ngModel)]="idEmpleado" [ngModelOptions]="{standalone: true}" (change)="seletedChange($event.id, 'idEmpleado')" required bindLabel="nombreEmpleado" bindValue="id">
          </mtx-select>
      </mat-form-field>
      <!-- (change)="seletedChange($event.id, 'idTipoPermiso')" -->
      <mat-form-field appearance="legacy" class="form-group col-sm-5">
          <mat-label>Tipo Permiso</mat-label>
          <mtx-select [items]="dataTipoPermiso" [(ngModel)]="idTipoPermiso" [ngModelOptions]="{standalone: true}" (change)="seletedChange($event.id, 'idTipoPermiso')" required bindLabel="descripcion" bindValue="id">
        </mtx-select>
      </mat-form-field>
    </div>
    <div class="form-row col-sm-12">
      <mat-form-field appearance="legacy" class="form-group col-sm-6 p-3">
          <mat-label>Fecha de inicio del permiso</mat-label>
          <input [mtxDatetimepicker]="fechaInicial" (dateChange)="dateChangeHandler($event.value, 'fechaHoraInicioPermiso')" formControlName="fechaHoraInicioPermiso" matInput readonly required (focus)="fechaInicial.open()">
          <mat-icon matSuffix style="cursor: pointer;" matTooltip="Fecha de inicio del permiso">calendar_month_outlined</mat-icon>
          <mtx-datetimepicker #fechaInicial type="datetime" mode="auto" startView="month"></mtx-datetimepicker>
      </mat-form-field>
      <mat-form-field appearance="legacy" class="form-group col-sm-6">
          <mat-label>Fecha fin del permiso</mat-label>
          <input [mtxDatetimepicker]="fechaFinal" (dateChange)="dateChangeHandler($event.value, 'fechaHoraFinPermiso')" formControlName="fechaHoraFinPermiso" matInput readonly required (focus)="fechaFinal.open()">
          <mat-icon matSuffix style="cursor: pointer;" matTooltip="Fecha fin del permiso">calendar_month_outlined</mat-icon>
          <mtx-datetimepicker #fechaFinal type="datetime" mode="auto" startView="month"></mtx-datetimepicker>
      </mat-form-field>
    </div>
    <div class="col-sm-12">
        <mat-form-field appearance="legacy" class="form-group col-sm-12 p-3">
            <mat-label>Descripci√≥n</mat-label>
            <textarea matInput formControlName="descripcion" required></textarea>
        </mat-form-field>
    </div>
  </div>
  <div class="col-sm-12 text-right">
    <button mat-raised-button color="primary" class="m-2" (click)="registrarPermiso()">Guardar</button>
    <button mat-raised-button color="warn" (click)="cancelarPermiso()">Canelar</button>
  </div>
</form>

</app-contenedor>
